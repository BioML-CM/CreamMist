{% extends "base.html" %}

{% block content %}

<div class="jumbotron" style="background-color: #A65D8C95;">
    <h1 style="color:#59364A"> CELLOSAURUS ID :
        <span style="color:#ffffff;background-color:#000000;opacity:0.5;"> &nbsp; {{ cell_line_info.cellosaurus_id }} &nbsp;
        </span>
    </h1><br>
{#    <hr class="my-4">#}
    <div class="row justify-content-start">
        <div class="lead col-6">
{#            <p> Cellosaurus ID : {{ cell_line_info.cellosaurus_id }} <br>#}

            {% for i in name_list %}
                {{ i[0][0] }}
                {% for n in i[0][1:] %}
                 , {{ n }}
                {% endfor %}
                : {{i[1]}} <br>
            {% endfor %}
        </div>
        <div class="lead col-4">
            <p>
                Cellosaurus Index : {{ data[0][0].cellosaurus_index }} <br>
                TISSUE : {{ cell_line_info.site }} <br>
                Data set : {{ dataset }} </p>
            </p>
        </div>
    </div>
</div>

{#    <select class="form-select form-select-sm" aria-label=".form-select-sm example" name="select_dataset">#}
{#        {% for i in form.dataset.choices %}#}
{#            <option value= "hello">{{ i }}</option>#}
{#        {% endfor %}#}
{#    </select>#}

<div class="container">
    <div class="row">
        <form action="{{ url_for('cell_line.information_cell_line',cell_line=cell_line, dataset=dataset) }}" method="POST">
{#             This hidden_tag is a CSRF security feature.#}
{#            {{ form.hidden_tag() }}#}
            {{ form.dataset.label }} &nbsp;&nbsp;  {{ form.dataset }} &nbsp;&nbsp;

            <button  class="btn btn-primary btn-sm" style="background-color: #59364A; border-color:#59364A;">Submit</button>
        </form><br><br>
    </div>

    <div class="row">
            <table id="data" class="table table-striped table-responsive">
                <thead>
                <tr>
                    <th>Cellosaurus ID</th>
                    <th>Drug name</th>
                    <th>Dataset</th>
                    <th>Min Dose</th>
                    <th>Max Dose</th>
                    <th>View</th>

                </tr>
                </thead>
                <tbody>
                {% for e,j,s in data %}
                    <tr>
                        <td>{{ e.cellosaurus_id }}</td>
                        <td><a href="{{ url_for('drug.information_drug', drug=e.standard_drug_name, dataset='All') }}">{{ e.standard_drug_name }} </a></td>
                        <td>{{ e.info }}</td>
                        <td>{{ "%.4f" | format(j.min_dosage) }}</td>
                        <td>{{ "%.4f" | format(j.max_dosage) }}</td>
                        <td><a href="{{ url_for('cell_line.view_logistic', exp=e.id) }}">view</a></td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>

    </div>
</div>


    <div class="container">
        <div class="row">
            <div class="col" id="chart1">
            </div>
            <div class="col" id="chart2">
            </div>
            <div class="col" id="chart3">
            </div>
        </div>
    </div>

    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script type="text/javascript">
        var graph1= {{ graph1Jason | safe}};
        Plotly.plot('chart1', graph1, {})

        var graph2= {{ graph2Jason | safe}};
        Plotly.plot('chart2', graph2, {})

        var graph3= {{ graph3Jason | safe}};
        Plotly.plot('chart3', graph3, {})
    </script>

{% endblock %}
