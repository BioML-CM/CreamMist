{% extends "base.html" %}

{% block content %}

<div class="jumbotron" style="background-color: #A65D8C95;">
    <h1 style="color:#59364A"> DRUG NAME :
        <span style="color:#ffffff;background-color:#000000;opacity:0.5;"> &nbsp; {{ drug_info.standard_drug_name }} &nbsp;
        </span>
    </h1><br>
{#    <hr class="my-4">#}
    <div class="row justify-content-start">

        <div class="lead col-4">
            {% for i in name_list %}
                {{ i[0][0] }}
                {% for n in i[0][1:] %}
                    , {{ n }}
                {% endfor %}
                : {{i[1]}} <br>
            {% endfor %}

        </div>
        <div class="lead col-6">
            <p>
                Data set : {{ dataset }} <br>
                SYNONYMS : {{ drug_info.synonyms }} <br>
                TARGET : {{ drug_info.target }} <br>
                PATHWAY : {{ drug_info.pathway }} </p>
            </p>
        </div>
    </div>
</div>

<div class="container">
    <div class="row">
        <form action="{{ url_for('drug.information_drug',drug=drug, dataset=dataset) }}" method="POST">
            {# This hidden_tag is a CSRF security feature. #}
{#            {{ form.hidden_tag() }}#}
            {{ form.dataset.label }} &nbsp;&nbsp;  {{ form.dataset }} &nbsp;&nbsp;
{#            {{ form.submit() }}#}
            <button  class="btn btn-primary btn-sm" style="background-color: #59364A; border-color:#59364A;">Submit</button>
        </form><br><br>

        <div class="col-md-12">

            <table id="data" class="table table-striped">
                <thead>
                <tr>
                    <th>Drug name</th>
                    <th>Cellosaurus ID</th>
                    <th>Dataset</th>
                    <th>Min Dose</th>
                    <th>Max Dose</th>
                    <th>View</th>

                </tr>
                </thead>
                <tbody>
                {% for e,j,s in data %}
                    <tr>
                        <td>{{ e.standard_drug_name }}</td>
                        <td><a href="{{ url_for('cell_line.information_cell_line', cell_line=e.cellosaurus_id, dataset='All') }}">{{ e.cellosaurus_id }} </a></td>
                        <td>{{ e.info }}</td>
                        <td>{{ "%.4f" | format(j.min_dosage) }}</td>
                        <td>{{ "%.4f" | format(j.max_dosage) }}</td>
                        <td><a href="{{ url_for('cell_line.view_logistic', exp=e.id, input_dose=2) }}">view</a></td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>

        </div>
    </div>
</div>


    <div class="container">
        <div class="row">
            <div class="col" id="chart1">
            </div>
            <div class="col" id="chart2">
            </div>
            <div class="col" id="chart3">
            </div>
        </div>
    </div>

    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script type="text/javascript">
        var graph1= {{ graph1Jason | safe}};
        Plotly.plot('chart1', graph1, {})

        var graph2= {{ graph2Jason | safe}};
        Plotly.plot('chart2', graph2, {})

        var graph3= {{ graph3Jason | safe}};
        Plotly.plot('chart3', graph3, {})
    </script>

{% endblock %}
